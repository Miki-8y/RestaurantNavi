<table align="left">
    <tr>
        <td>
            <h4><b>あ</b></h4>
        </td>
    </tr>
</table>

<%# <form action="/condition" method="post">
    <b><span class="letter_color2">：メッセージ：</span></b>
    <textarea required type="text" name="message" placeholder="Hello! How are you?" cols="50" rows="5"></textarea>
</form>

<table align="center">
    <tr>
        <td><input class="btn btn-primary" type="submit" value="Write">
            <input class="btn btn-success" type="reset" value="Reset"></td>
    </tr>
    </form>
</table> %>


<button type="button" onclick="getLocation()">現在地取得</button> %>
<div id="display1"></div>
<div id="display2"></div>

<script>
    let display1 = document.getElementById("display1")
    let display2 = document.getElementById("display2")

    // function getLocation() {
    //     if (navigator.geolocation) {
    //         navigator.geolocation.getCurrentPosition(showPosition);
    //     } else {
    //         alert("Geolocation is not supported by this browser.");
    //     }
    // }

    // function showPosition(position) {
    //     $.ajax({
    //         type: 'GET',
    //         // dataType: "jsonp",
    //         // url: `https://maps.googleapis.com/maps/api/geocode/json?latlng=${position.coords.latitude},${position.coords.longitude}&sensor=true&key=AIzaSyAJFeKqH32Px6AJ5VDIwuIs8E8Zs-FSjk0&language=en`,
    //         url: `http://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=8fca40acabfe3dab&lat=${position.coords.latitude}&lng=${position.coords.longitude}&range=5&format=json`,
    //     }).then(function (response) {
    //         console.log(response)
    //         dis1 = Number(response.results[0].geometry.location.lat)
    //         dis2 = Number(response.results[0].geometry.location.lng)
    //         display1.textContent = dis1
    //         display2.textContent = dis2
    //     })

    // }

    function getLocation() {
        $.ajax({
            // APIのフロントエンド
            url: 'http://webservice.recruit.co.jp/hotpepper/gourmet/v1/',
            // JSONPを使う場合の指定
            dataType: 'json',
            data: {
                key: '8fca40acabfe3dab',
                large_area: 'Z011',
                format: 'json'
            },
            // レスポンスが返ってきたときの処理
            success: function (json) {
                console.log(json.results.shop[0])
                // var shop = json.results.shop[0];
                // var client = new GStreetviewClient();
                // var latLng = new GLatLng(shop.lat, shop.lng);
                // client.getNearestPanorama(latLng, function (res) {
                //     if (res.code == 200) {
                //         var panorama = new GStreetviewPanorama(document.getElementById(
                //             'streetview'), {
                //             latlng: res.location.latlng,
                //             pov: res.location.pov
                //         });
                //     }
                // });
            },
            error: function () {}
        });
    }
</script>