# 簡易仕様書

## 作者
湯浅太貴

## アプリ名
RestaurantNavi

## 動作対象端末・OS
### 動作対象端末
PC
Google Chrome (version 120.0.6099.200(Official Build)(64ビット))
### 動作対象OS
Windows 11 Pro 64ビット（version 23H2）

## 開発環境
### CPU
Intel Core i7-11800H 2.30 GHz
### メモリ
16.0GB
### 開発ソフトウェア
Visual Studio Code (version 1.85.1)
### 仮想化ソフトウェア
VirtualBox (version 7.0.8 r156879 (Qt5.15.2))
### ゲストOS
CentOs(Linux)(version 7)
### ホストOS
Windows 11 Pro 64ビット（version 23H2）
### 開発言語
Ruby (version 2.7.8p225 (2023-03-30 revision 1f4d455848) [x86_64-linux])
Javascript
### 通信プロトコル
HTTP,SSH
### Webアプリケーションフレームワーク
Sinatra (version 3.1.0)
### CSSフレームワーク
Bootstrap (version 5.0.2)
### データベースサーバ
SQLite3 (version 1.6.6-x86_64-linux)
### O/Rマッピング用ライブラリ
ActiveRecord (version 7.0.8)
### ブラウザ
Google Chrome (version 120.0.6099.200(Official Build)(64ビット))

### データベース定義
（データベース名）
app
（テーブル名）
storeinfos
（カラム）
（論理名：物理名：型）
番号：id：INTEGER
掲載店名：name：VARCHAR(200)
ロゴ画像URL：logoimage_url：VARCHAR(300)
住所：address：VARCHAR(200)
交通アクセス：access：VARCHAR(200)
携帯用交通アクセス：mobile_access：VARCHAR(200)
PC向け中サイズ写真URL：photo_url：VARCHAR(300)
営業時間：open：VARCHAR(100)
定休日：close：VARCHAR(50)

### 開発期間
12日（2023年12月26日(火)～2024年1月6日(土)）

#### コンセプト
現在地から3km以内のお店がすぐに見つかる！

## アプリケーション機能
### 機能一覧
- 店舗検索
ホットペッパーグルメサーチAPIを使用して、現在地周辺の飲食店を検索する．
現在地からの検索半径（300,500,1000,2000,3000m以内）を選択可能．
店舗名を入力可能．
店舗名が入力されていない場合は，検索半径のみが検索条件に反映される．
- 店舗情報取得
ホットペッパーグルメサーチAPIを使用して、店舗の詳細情報を取得する．

### 画面一覧
- 店舗検索および店舗一覧画面
条件（現在地からの検索半径，店舗名）を指定して店舗を検索する．
検索結果の店舗を一覧表示する．
- 店舗詳細画面
店舗検索および店舗一覧画面の「詳細」ボタンを押下した場合，その店舗の詳細情報を表示する．

### 使用しているAPI,SDK,ライブラリなど
- ホットペッパーグルメサーチAPI
- dotenv

#### こだわったポイント
現在地からの検索半径と店舗名を指定できるようにしました．
小さなタブ（PC上であれば画面半分）でも使用しやすいような画面設計にしました．
全ページの右上に存在するメニューバーのアニメーションにこだわりました．

### デザイン面でこだわったポイント
Bootstrapを用いてボタン配置や見た目にこだわりました．
html上でテーブルとして表示することにより，統一感を持たせました．
詳細画面で店舗情報をリストとして表示することにより，統一感を持たせました．
全ページの右上に存在するメニューバーのアニメーションにこだわりました．

### 該当プロジェクトのリポジトリ URL（GitHub,GitLab など Git ホスティングサービスを利用されている場合）
https://github.com/Miki-8y/RestaurantNavi

### アドバイスして欲しいポイント
店舗の一覧リストを使いやすく，見やすくしたい．特に，ページング処理を追加したい．

****************************あったほうがいいと思う機能**********************************
ユーザーのログイン，ログアウト機能
ユーザー管理をして，ユーザごとにお気に入りの店舗を登録できる機能
検索結果を反映したgoogle mapを表示（店舗にピンなどの目印を表示）する機能
top画面で全画面表示にしたときに，店舗検索結果を3列ぐらいで表示
top画面の検索結果をbootstrapのcardで表示（https://getbootstrap.jp/docs/5.3/components/card/）
テキストボックスのサニタイジング

店舗検索画面と検索結果画面を同一のページとして作ってしまったので，時間があれば以下の実装に変更すべきだった．
→店舗検索画面と検索結果画面を分ける
→検索結果をデータベースに格納
→データベースをもとにページングに対応したデータ表示
→コードが見やすいようにscriptを別ディレクトリから読み込むこと．

...etc
*********************************************************************************

※バグ
ブラウザの戻るボタン（左上の「←」）を押して「詳細」ボタンを押すと，テーブルに同じ店舗のレコードが重複して登録されてしまう．
詳細画面にレコードが存在しているだけ表示されるため，同じ店舗の詳細情報が連続で表示される．

###########################################################開発中の不具合対策#################################################
ローカル環境での開発であったため，以下の対策をしました．
CORSエラーでグルメサーチAPIのレスポンスを表示できなかったので，下記サイト（Chrome ショートカットにCORSエラー無視の設定を行う手順）を参考にして開発を行いました．
https://webbibouroku.com/Blog/Article/cors-browser-setting

「位置情報の取得がユーザーによって拒否されました．」が出た場合
下記サイトでGUIでの“unsafely-treat-insecure-origin-as-secure”設定を行いました．
https://qiita.com/dmiya/items/77eadd8abdfd7282d917
############################################################################################################################